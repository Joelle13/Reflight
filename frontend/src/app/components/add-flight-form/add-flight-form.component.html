<div class="container">
  <h1 class="form-section-title">Gestion des vols</h1>

  <!-- Formulaire de cr√©ation -->
  <form
    [formGroup]="addFlight"
    class="needs-validation"
    (ngSubmit)="onSubmit()">

    <h2 class="form-title">Cr√©er un nouveau vol</h2>

    <div class="mb-3">
      <label class="label-custom">Num√©ro du vol</label>
      <input type="text" class="form-control" formControlName="flightNumber"
             placeholder="Ex: AF6101"
             [class.is-invalid]="flightNumber.invalid && flightNumber.touched"
             [class.is-valid]="flightNumber.valid && flightNumber.touched">
      <div *ngIf="flightNumber?.invalid && flightNumber.touched" class="invalid-feedback text-danger">
        <div *ngIf="flightNumber?.errors?.['required']">Un num√©ro de vol est requis</div>
        <div *ngIf="flightNumber?.errors?.['minlength']">Un num√©ro de vol doit contenir 3 caract√®res ou plus</div>
        <div *ngIf="flightNumber?.errors?.['maxlength']">Un num√©ro de vol doit contenir 6 caract√®res ou moins</div>
      </div>
    </div>

    <div class="mb-3">
      <label class="label-custom">Compagnie a√©rienne</label>
      <select name="airline" id="airline" class="form-control" formControlName="airline"
              [class.is-invalid]="airline.invalid && airline.touched"
              [class.is-valid]="airline.valid && airline.touched">
        <option value="" disabled selected>S√©lectionnez une compagnie</option>
        <option *ngFor="let airline of airlines" [value]="airline.id">{{airline.name}}</option>
      </select>
      <div *ngIf="airline?.invalid && airline.touched" class="invalid-feedback text-danger">
        <div *ngIf="airline?.errors?.['required']">Une compagnie a√©rienne est requise</div>
      </div>
    </div>

    <div class="mb-3">
      <label class="label-custom">A√©roport de d√©part</label>
      <input type="text" class="form-control" formControlName="departureAirport"
             placeholder="Ex: CDG - Paris Charles de Gaulle"
             [class.is-invalid]="departureAirport.invalid && departureAirport.touched"
             [class.is-valid]="departureAirport.valid && departureAirport.touched">
      <div *ngIf="departureAirport?.invalid && departureAirport.touched" class="invalid-feedback text-danger">
        <div *ngIf="departureAirport?.errors?.['required']">Un a√©roport de d√©part est requis</div>
        <div *ngIf="departureAirport?.errors?.['minlength']">Un a√©roport de d√©part doit contenir 3 caract√®res ou plus</div>
        <div *ngIf="departureAirport?.errors?.['maxlength']">Un a√©roport de d√©part contenir 100 caract√®res ou moins</div>
      </div>
    </div>

    <div class="mb-3">
      <label class="label-custom">A√©roport d'arriv√©e</label>
      <input type="text" class="form-control" formControlName="arrivalAirport"
             placeholder="Ex: JFK - New York John F. Kennedy"
             [class.is-invalid]="arrivalAirport.invalid && arrivalAirport.touched"
             [class.is-valid]="arrivalAirport.valid && arrivalAirport.touched">
      <div *ngIf="arrivalAirport?.invalid && arrivalAirport.touched" class="invalid-feedback text-danger">
        <div *ngIf="arrivalAirport?.errors?.['required']">Un a√©roport d'arriv√©e est requis</div>
        <div *ngIf="arrivalAirport?.errors?.['minlength']">Un a√©roport d'arriv√©e doit contenir 3 caract√®res ou plus</div>
        <div *ngIf="arrivalAirport?.errors?.['maxlength']">Un a√©roport d'arriv√©e contenir 100 caract√®res ou moins</div>
      </div>
    </div>

    <div class="mb-3">
      <label class="label-custom d-block">D√©part</label>
      <div class="d-flex gap-3 align-items-center">
        <input
          type="date"
          class="form-control w-auto"
          formControlName="departureDate"
          [class.is-invalid]="departureDate.invalid && departureDate.touched"
          [class.is-valid]="departureDate.valid && departureDate.touched"
        />
        <input
          type="time"
          class="form-control w-auto"
          formControlName="departureTime"
          [class.is-invalid]="departureTime.invalid && departureTime.touched"
          [class.is-valid]="departureTime.valid && departureTime.touched"
        />
      </div>
      <div *ngIf="departureDate.invalid && departureDate.touched" class="invalid-feedback text-danger d-block">
        <div *ngIf="departureDate.errors?.['required']">La date de d√©part est requise</div>
        <div *ngIf="departureDate?.errors?.['dateNotAfterToday']">Veuillez choisir une date valide</div>
      </div>
      <div *ngIf="departureTime.invalid && departureTime.touched" class="invalid-feedback text-danger d-block">
        <div *ngIf="departureTime.errors?.['required']">L'heure de d√©part est requise</div>
      </div>
    </div>

    <div class="mb-3">
      <label class="label-custom d-block">Arriv√©e</label>
      <div class="d-flex gap-3 align-items-center">
        <input
          type="date"
          class="form-control w-auto"
          formControlName="arrivalDate"
          [class.is-invalid]="arrivalDate.invalid && arrivalDate.touched"
          [class.is-valid]="arrivalDate.valid && arrivalDate.touched"
        />
        <input
          type="time"
          class="form-control w-auto"
          formControlName="arrivalTime"
          [class.is-invalid]="arrivalTime.invalid && arrivalTime.touched"
          [class.is-valid]="arrivalTime.valid && arrivalTime.touched"
        />
      </div>
      <div *ngIf="arrivalDate.invalid && arrivalDate.touched" class="invalid-feedback text-danger d-block">
        <div *ngIf="arrivalDate.errors?.['required']">La date d'arriv√©e est requise</div>
        <div *ngIf="arrivalDate?.errors?.['dateNotAfterToday']">Veuillez choisir une date valide</div>
      </div>
      <div *ngIf="arrivalTime.invalid && arrivalTime.touched" class="invalid-feedback text-danger d-block">
        <div *ngIf="arrivalTime.errors?.['required']">L'heure d'arriv√©e est requise</div>
      </div>
    </div>

    <div class="d-flex justify-content-center mt-4">
      <button type="submit" class="btn btn-success">
        ‚úàÔ∏è Cr√©er le vol
      </button>
    </div>
  </form>

  <!-- Formulaire de suppression -->
  <form [formGroup]="deleteFlight"
        class="needs-validation"
        (ngSubmit)="onSubmitDelete()">

    <h2 class="form-title" style="color: #dc3545;">üóëÔ∏è Supprimer un vol</h2>

    <div class="mb-3">
      <label class="label-custom">Num√©ro du vol</label>
      <input type="text" class="form-control" formControlName="flightNumber"
             placeholder="Ex: AF6101"
             [class.is-invalid]="flightNumberDelete.invalid && flightNumberDelete.touched"
             [class.is-valid]="flightNumberDelete.valid && flightNumberDelete.touched">
      <div *ngIf="flightNumberDelete?.invalid && flightNumberDelete.touched" class="invalid-feedback text-danger">
        <div *ngIf="flightNumberDelete?.errors?.['required']">Un num√©ro de vol est requis</div>
        <div *ngIf="flightNumberDelete?.errors?.['minlength']">Un num√©ro de vol doit contenir 3 caract√®res ou plus</div>
        <div *ngIf="flightNumberDelete?.errors?.['maxlength']">Un num√©ro de vol doit contenir 6 caract√®res ou moins</div>
      </div>
    </div>

    <div class="d-flex justify-content-center mt-4">
      <button type="submit" class="btn btn-danger">
        üóëÔ∏è Supprimer le vol
      </button>
    </div>
  </form>
</div>
